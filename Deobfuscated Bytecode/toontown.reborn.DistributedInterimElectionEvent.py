# uncompyle6 version 3.9.0
# Python bytecode version base 2.7 (62211)
# Decompiled from: Python 2.7.16 (v2.7.16:413a49145e, Mar  4 2019, 01:30:55) [MSC v.1500 32 bit (Intel)]
# Embedded file name: toontown.reborn.DistributedInterimElectionEvent
# Compiled at: 2014-04-30 09:53:54
from pandac.PandaModules import *
from otp.nametag.NametagConstants import *
from direct.distributed.ClockDelta import *
from direct.interval.IntervalGlobal import *
from direct.distributed.DistributedObject import DistributedObject
from direct.fsm.FSM import FSM
from direct.actor import Actor
from direct.task import Task
from toontown.toon import NPCToons
from toontown.electionsuit import DistributedSuitBase, SuitDNA
from toontown.toonbase import ToontownGlobals
from toontown.battle import BattleProps
from otp.margins.WhisperPopup import *
import InterimElectionGlobals
from direct.directnotify import DirectNotifyGlobal
from random import choice
from direct.interval.LerpInterval import LerpFunctionInterval
from otp.speedchat import SpeedChatGlobals
import SafezoneInvasionRebornGlobals
from toontown.battle.BattleProps import *
from toontown.building.ElevatorUtils import *
from toontown.toonbase import TTLocalizer as TTL

class DistributedInterimElectionEvent(DistributedObject, FSM):
    notify = DirectNotifyGlobal.directNotify.newCategory('DistributedInterimElectionEvent')

    def __init__(self, cr):
        DistributedObject.__init__(self, cr)
        FSM.__init__(self, 'ElectionFSM')
        self.cr.election = self
        self.interactiveOn = False
        self.showFloor = NodePath('ShowFloor')
        self.showFloor.setPos(80, 0, 4)
        stage = loader.loadModel('phase_4/models/events/election_stage')
        stage.reparentTo(self.showFloor)
        stage.setHpr(270, 0, 0)
        stage.setScale(2.0, 1.8, 1.5)
        podium = loader.loadModel('phase_4/models/events/election_stagePodium')
        podium.reparentTo(self.showFloor)
        podium.setPosHpr(-6, 0, 3, 270, -2, 5)
        podium.setScale(0.65)
        self.counterLeft = Actor.Actor('phase_4/models/events/election_counterLeft-mod', {'body': 'phase_4/models/events/election_counterLeft-countSeq'})
        self.counterLeft.reparentTo(self.showFloor)
        self.counterLeft.setPosHpr(13.5, 10, 2.95, 270, 0, 0)
        self.counterLeft.setScale(2.0)
        self.counterRight = Actor.Actor('phase_4/models/events/election_counterRight-mod', {'body': 'phase_4/models/events/election_counterRight-countSeq'})
        self.counterRight.reparentTo(self.showFloor)
        self.counterRight.setPosHpr(13.5, -10, 3.25, 270, 0, 0)
        self.counterRight.setScale(2.0)
        rope = loader.loadModel('phase_4/models/events/election_rope')
        rope.reparentTo(self.showFloor)
        rope.setPosHpr(-34, 18, 0.46, 270, 0, 0)
        rope.setScale(2, 2, 2)
        rc = CollisionSphere(8.2, 15.5, 2.0, 13.5)
        rc2 = CollisionBox(Point3(8.88, 28.76, 0.0), 4.44, 6.38, 9.0)
        ropeCollision = rope.attachNewNode(CollisionNode('collision'))
        ropeCollision.node().addSolid(rc)
        ropeCollision.node().addSolid(rc2)
        self.geom = base.cr.playGame.hood.loader.geom
        if config.GetBool('want-doomsday-reborn', False):
            self.radar = loader.loadModel('phase_14/models/props/radar')
            self.radar.setPos(-61.255, -10.315, 0)
            self.radar.setScale(0.05)
            self.radar.reparentTo(render)
            self.cogdo = loader.loadModel('phase_5/models/cogdominium/tt_m_ara_cbe_fieldOfficeLoanShark')
            self.cogdo.setPos(-48.41, -93.8506, 125.500015)
            self.cogdo.setH(-178)
            self.cogdo.reparentTo(render)
            self.cogdo.stash()
            self.cogdoWalls = loader.loadModel('phase_4/models/modules/cogdo_flatbldgs')
            self.cogdoWalls.setPos(0, 0, 125)
            self.cogdoWalls.reparentTo(render)
            self.cogdoWalls.stash()
            self.cogdoList = [self.cogdo, self.cogdoWalls]
            self.bldg = self.geom.find('**/sz23:toon_landmark_TT_B2_DNARoot')
            self.bldgWalls = self.geom.find('**/oldman_flatbldgs_DNARoot')
            self.bldgList = [self.bldg, self.bldgWalls]
            self.sky = loader.loadModel(SafezoneInvasionRebornGlobals.CogSkyFile)
            self.sky.setBin('background', 100)
            self.sky.setColor(0.3, 0.3, 0.28, 1)
            self.sky.setTransparency(TransparencyAttrib.MDual, 1)
            self.sky.setDepthTest(0)
            self.sky.setDepthWrite(0)
            self.sky.setFogOff()
            self.sky.setZ(-20.0)
            ce = CompassEffect.make(NodePath(), CompassEffect.PRot | CompassEffect.PZ)
            self.sky.node().setEffect(ce)
            self.fadeIn = self.sky.colorScaleInterval(3.0, Vec4(1, 1, 1, 1), startColorScale=Vec4(1, 1, 1, 0), blendType='easeInOut')
            self.cogSkyBegin = LerpColorScaleInterval(self.geom, 3.0, Vec4(0.4, 0.4, 0.4, 1), blendType='easeInOut')
            self.cogSkyBeginStage = LerpColorScaleInterval(self.showFloor, 3.0, Vec4(0.4, 0.4, 0.4, 1), blendType='easeInOut')
            self.cogSkyBeginRadar = LerpColorScaleInterval(self.radar, 3.0, Vec4(0.4, 0.4, 0.4, 1), blendType='easeInOut')
            self.beginSkySequence = Sequence(Func(self.fadeIn.start), Func(self.cogSkyBegin.start), Func(self.cogSkyBeginRadar.start), Func(self.cogSkyBeginStage.start))
            self.fadeOut = self.sky.colorScaleInterval(6.0, Vec4(1, 1, 1, 0), startColorScale=Vec4(1, 1, 1, 1), blendType='easeInOut')
            self.cogSkyEnd = LerpColorScaleInterval(self.geom, 7.0, Vec4(1, 1, 1, 1), blendType='easeInOut')
            self.cogSkyEndStage = LerpColorScaleInterval(self.showFloor, 7.0, Vec4(1, 1, 1, 1), blendType='easeInOut')
            self.cogSkyEndRadar = LerpColorScaleInterval(self.radar, 7.0, Vec4(1, 1, 1, 1), blendType='easeInOut')
            self.endSkySequence = Sequence(Func(self.fadeOut.start), Func(self.cogSkyEnd.start), Func(self.cogSkyEndStage.start), Func(self.cogSkyEndRadar.start), Wait(7), Func(self.sky.removeNode))
        self.flippyStand = Actor.Actor('phase_4/models/events/election_flippyStand-mod', {'idle': 'phase_4/models/events/election_flippyStand-idle'})
        self.flippyStand.reparentTo(self.showFloor)
        self.flippyStand.setPosHprScale(-62.45, 14.39, 0.01, 325, 0, 0, 0.55, 0.55, 0.55)
        self.flippyStand.exposeJoint(None, 'modelRoot', 'LInnerShoulder')
        flippyTable = self.flippyStand.find('**/LInnerShoulder')
        self.flippyStand.exposeJoint(None, 'modelRoot', 'Box_Joint')
        wheelbarrowJoint = self.flippyStand.find('**/Box_Joint').attachNewNode('Pie_Joint')
        wheelbarrow = self.flippyStand.find('**/Box')
        wheelbarrow.setPosHprScale(-2.39, 0.0, 1.77, 0.0, 0.0, 6.0, 1.14, 1.54, 0.93)
        pie = loader.loadModel('phase_3.5/models/props/tart')
        pieS = pie.copyTo(flippyTable)
        pieS.setPosHprScale(-2.61, -0.37, -1.99, 355.6, 90.0, 4.09, 1.6, 1.6, 1.6)
        for pieSettings in InterimElectionGlobals.FlippyWheelbarrowPies:
            pieModel = pie.copyTo(wheelbarrowJoint)
            pieModel.setPosHprScale(*pieSettings)

        wheelbarrowJoint.setPosHprScale(3.94, 0.0, 1.06, 270.0, 344.74, 0.0, 1.43, 1.12, 1.0)
        self.restockSfx = loader.loadSfx('phase_9/audio/sfx/CHQ_SOS_pies_restock.ogg')
        self.splashSfx = loader.loadSfx('phase_9/audio/sfx/CHQ_FACT_paint_splash.ogg')
        cs = CollisionBox(Point3(7, 0, 0), 12, 5, 18)
        self.pieCollision = self.flippyStand.attachNewNode(CollisionNode('wheelbarrow_collision'))
        self.pieCollision.node().addSolid(cs)
        self.accept('enter' + self.pieCollision.node().getName(), self.handleWheelbarrowCollisionSphereEnter)
        self.alec = NPCToons.createLocalNPC(2022)
        self.alec.setPos(-4.5, -0.14, 3.13)
        self.oldman = NPCToons.createLocalNPC(3112)
        self.flippy = NPCToons.createLocalNPC(2001)
        self.bob = NPCToons.createLocalNPC(2002)
        self.larry = NPCToons.createLocalNPC(2005)
        if config.GetBool('want-doomsday-reborn', False):
            self.characters = [
             self.oldman, self.flippy, self.bob, self.larry]
        if not config.GetBool('want-doomsday-reborn', False):
            self.startInteractiveFlippy()
        self.flippyStand.loop('idle')
        self.alecNode = None
        self.surlee = NPCToons.createLocalNPC(20191)
        self.surlee.useLOD(1000)
        self.surlee.find('**/250').removeNode()
        self.surlee.find('**/500').removeNode()
        surleeLegs = self.surlee.find('**/legs')
        surleeLegs.setScale(1, 1, 1.5)
        surleeLegs.setZ(-0.26)
        self.surlee.find('**/__Actor_torso').setZ(1.1)
        self.surlee.find('**/torso-top').setPosHprScale(0.0, 0.0, -0.45, 0.0, 0.0, 0.0, 1.0, 0.98, 1.96)
        self.surlee.find('**/__Actor_head').setZ(0.7)
        self.surlee.find('**/neck').setZ(0.7)
        self.surlee.find('**/sleeves').setZ(0.7)
        self.surlee.find('**/arms').setZ(0.7)
        self.surlee.find('**/hands').setZ(0.7)
        self.surlee.setPos(-22, 7, 0)
        self.surlee.setH(110)
        rHand = self.surlee.find('**/def_joint_right_hold')
        clipBoard = loader.loadModel('phase_4/models/props/tt_m_prp_acs_clipboard')
        placeholder = rHand.attachNewNode('ClipBoard')
        clipBoard.instanceTo(placeholder)
        placeholder.setH(180)
        placeholder.setScale(render, 1.0)
        placeholder.setPos(0.5, 0.6, -0.1)
        placeholder.setScale(1.3)
        self.surleeR = NPCToons.createLocalNPC(2019)
        self.surleeR.useLOD(1000)
        self.surleeR.head = self.surleeR.find('**/__Actor_head')
        self.surleeR.initializeBodyCollisions('toon')
        if config.GetBool('want-doomsday-reborn', False):
            self.prepostera = NPCToons.createLocalNPC(20201)
            self.preposteraR = NPCToons.createLocalNPC(2020)
            self.prepostera.useLOD(1000)
            self.preposteraR.useLOD(1000)
            self.prepostera.find('**/250').removeNode()
            self.preposteraR.find('**/250').removeNode()
            self.prepostera.find('**/500').removeNode()
            self.preposteraR.find('**/500').removeNode()
            preposteraLegs = self.prepostera.find('**/legs')
            preposteraLegs.setScale(1, 1, 0.5)
            self.prepostera.find('**/__Actor_torso').setZ(-0.9)
            self.prepostera.find('**/torso-top').setPosHprScale(0.0, 0.0, 0.2, 0.0, 0.0, 0.0, 1.0, 0.98, 0.5)
            self.prepostera.find('**/__Actor_head').setZ(-0.7)
            self.prepostera.find('**/neck').setZ(-0.7)
            self.prepostera.find('**/sleeves').setZ(-0.7)
            preposteraArms = self.prepostera.find('**/arms')
            preposteraArms.setZ(-0.4)
            preposteraArms.setScale(1, 1, 0.8)
            preposteraHands = self.prepostera.find('**/hands')
            preposteraHands.setZ(-0.4)
            preposteraHands.setScale(1, 1, 0.8)
            self.prepostera.setPos(-57.923, 1.356, -1.975)
            self.preposteraR.setPos(-57.923, 1.356, -1.975)
            self.prepostera.setH(130)
            self.preposteraR.setH(130)
            self.prepostera.initializeBodyCollisions('toon')
            rHand = self.prepostera.find('**/def_joint_right_hold')
            clipBoard = loader.loadModel('phase_4/models/props/tt_m_prp_acs_clipboard')
            placeholder = rHand.attachNewNode('ClipBoard')
            clipBoard.instanceTo(placeholder)
            placeholder.setH(180)
            placeholder.setScale(render, 1.0)
            placeholder.setPos(0, -0.3, 0.3)
            rHand = self.preposteraR.find('**/def_joint_right_hold')
            placeholder = rHand.attachNewNode('ClipBoard')
            clipBoard.instanceTo(placeholder)
            placeholder.setH(180)
            placeholder.setScale(render, 1.0)
            placeholder.setPos(0, 0, 0.1)
            self.dimm = NPCToons.createLocalNPC(2018)
            self.dimm.useLOD(1000)
            self.dimm.find('**/250').removeNode()
            self.dimm.find('**/500').removeNode()
            self.dimm.setPos(-55.449, 1.356, -1.968)
            self.dimm.setH(130)
            self.dimm.initializeBodyCollisions('toon')
            self.dimm.nametagLods = []
            for hi in range(self.dimm.headParts.getNumPaths()):
                head = self.dimm.headParts[hi]
                nameNode = head.attachNewNode('nameNode')
                self.dimm.nametagLods.append(nameNode)
                tag = self.dimm.nametag3d.copyTo(self.dimm)
                tag.wrtReparentTo(nameNode)
                tag.setScale(0.35)

            self.dimm.nametag3d.hide()
            rHand1 = self.dimm.find('**/def_joint_right_hold')
            sillyReader = loader.loadModel('phase_4/models/props/tt_m_prp_acs_sillyReader')
            placeholder1 = rHand1.attachNewNode('SillyReader')
            sillyReader.instanceTo(placeholder1)
            placeholder1.setH(180)
            placeholder1.setScale(render, 1.0)
            placeholder1.setPos(0, 0, 0.1)
            self.surlee.reparentTo(self.showFloor)
            self.alec.reparentTo(self.showFloor)
            self.surleeR.reparentTo(self.showFloor)
            self.prepostera.reparentTo(render)
            self.dimm.reparentTo(render)
            self.surlee.hide()
            self.surleeR.hide()
            self.prepostera.addActive()
            self.prepostera.startBlink()
            self.prepostera.loop('scientistJealous')
            self.preposteraR.loop('neutral')
            self.dimm.addActive()
            self.dimm.startBlink()
            self.dimm.loop('scientistJealous')
        self.suit = DistributedSuitBase.DistributedSuitBase(cr)
        self.suit.dna = SuitDNA.SuitDNA()
        self.suit.dna.newSuit('le')
        self.suit.setDNA(self.suit.dna)
        self.suit.setDisplayName(TTL.SuitLegalEagle + '\n' + TTL.Lawbot + '\n' + TTL.Level.title() + ' 11 ' + TTL.SkeleRevivePostFix)
        self.suit.setPickable(0)
        self.suit.setPosHpr(-161.088, 20.253, 0.525, -180, 0, 0)
        self.suitLose = self.suit.getLoseActor()
        self.suitLose.setPosHpr(-40.645, -5.602, -1.325, -90, 0, 0)
        self.suitLose.reparentTo(render)
        self.suitLose.hide()
        self.suit.collNodePath.removeNode()
        self.suit.doId = id(self.suit)
        self.collTube = CollisionTube(0, 0, 0.5, 0, 0, 4, 2)
        self.collNode = CollisionNode('suit')
        self.collNode.addSolid(self.collTube)
        self.collNodePath = self.suit.attachNewNode(self.collNode)
        self.bags = DistributedSuitBase.DistributedSuitBase(cr)
        self.bags.dna = SuitDNA.SuitDNA()
        self.bags.dna.newSuit('mb')
        self.bags.setDNA(self.bags.dna)
        self.bags.setDisplayName(TTL.SuitMoneyBags + '\n' + TTL.Cashbot + '\n' + TTL.Level.title() + ' 10')
        self.bags.setPickable(0)
        self.bags.setPosHpr(-42.473, -82.058, 0.525, 180, 0, 0)
        self.collTube = CollisionTube(0, 0, 0.5, 0, 0, 4, 2)
        self.collNode = CollisionNode('suit')
        self.collNode.addSolid(self.collTube)
        self.collNodePath = self.bags.attachNewNode(self.collNode)
        phasePath = 'phase_3.5/audio/dial/'
        self.speechMurmurSfx = loader.loadSfx(phasePath + 'COG_VO_murmur.ogg')
        self.speechStatementSfx = loader.loadSfx(phasePath + 'COG_VO_statement.ogg')
        self.speechQuestionSfx = loader.loadSfx(phasePath + 'COG_VO_question.ogg')
        self.speechGruntSfx = loader.loadSfx(phasePath + 'COG_VO_grunt.ogg')
        self.laffMeter = base.localAvatar.laffMeter
        self.book = base.localAvatar.book.bookOpenButton
        self.book2 = base.localAvatar.book.bookCloseButton
        self.finishedPreShow = False
        self.finishedBegin = False
        self.finishedAlecSpeech = False
        self.finishedCogLanding = False
        self.finishedInvasion = False
        self.finishedInvasionEnding = False
        return

    def enterOff(self, offset):
        self.showFloor.reparentTo(hidden)
        if config.GetBool('want-doomsday-reborn', False):
            self.radar.reparentTo(hidden)
            self.cogdo.reparentTo(hidden)
            self.cogdoWalls.reparentTo(hidden)

    def exitOff(self):
        self.showFloor.reparentTo(render)
        if config.GetBool('want-doomsday-reborn', False):
            self.radar.reparentTo(render)
            self.cogdo.reparentTo(hidden)
            self.cogdoWalls.reparentTo(hidden)

    def __cleanupNPCs(self):
        if config.GetBool('want-doomsday-reborn', False):
            npcs = [
             self.flippy, self.oldman, self.alec, self.surlee, self.surleeR, self.prepostera, self.preposteraR, self.dimm, self.suit, self.bags, self.larry, self.bob]
        if not config.GetBool('want-doomsday-reborn', False):
            npcs = [
             self.flippy, self.oldman, self.alec, self.surlee, self.surleeR, self.suit, self.bags]
        for npc in npcs:
            if npc:
                npc.removeActive()
                npc.hide()

    def delete(self):
        self.demand('Off', 0.0)
        self.ignore('entercnode')
        self.showFloor.removeNode()
        if config.GetBool('want-doomsday-reborn', False):
            self.radar.removeNode()
            self.cogdo.removeNode()
            self.cogdoWalls.removeNode()
            del self.cogSkyBegin
            del self.cogSkyEnd
            del self.cogSkyBeginStage
            del self.cogSkyEndStage
            del self.cogSkyBeginRadar
            del self.cogSkyEndRadar
            del self.beginSkySequence
            del self.endSkySequence
        self.stopInteractiveFlippy()
        self.ignore('enter' + self.pieCollision.node().getName())
        self.__cleanupNPCs()
        DistributedObject.delete(self)

    def enterIdle(self, offset):
        if config.GetBool('want-doomsday-reborn', False):
            self.alec.reparentTo(self.showFloor)
            self.alec.useLOD(1000)
            self.alec.addActive()
            self.alec.startBlink()
            self.alec.initializeBodyCollisions('toon')
            self.alec.head = self.alec.find('**/__Actor_head')
            self.alec.setH(90)
            self.alec.show()
            self.alec.addActive()
            self.alec.startBlink()
            self.alec.loop('neutral')
            self.surleeIntroInterval = Sequence(Wait(10), Func(self.alec.setChatAbsolute, "Welcome Toons, from far and wide! Wow, it's election time already?", CFSpeech | CFTimeout), Wait(5), Func(self.alec.setChatAbsolute, "For a while now, Flippy and Lil' Oldman have been campaigning for YOUR vote!", CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, "Now it's time to see what the Toons of the world have decided!", CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, 'Afraid of an invasion? Not to worry! We have our team of Loony Lab Scientists on the job!', CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, 'Back at the Gazebo, you see them... NOT slacking off! Yes, yes, ahem...', CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, "Not even the strongest of Cogs can fly in! Surlee's quite a good worker.", CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, "For those of you just tuning in, I'll repeat my rant...", CFSpeech | CFTimeout))
            self.surleeIntroInterval.loop()
            self.surleeIntroInterval.setT(offset)
        self.counterLeft.pose('body', 0)
        self.counterRight.pose('body', 0)

    def exitIdle(self):
        if config.GetBool('want-doomsday-reborn', False):
            self.surleeIntroInterval.finish()

    def startInteractiveFlippy(self):
        self.flippy.reparentTo(render)
        self.flippy.setPosHpr(30.469, 6.081, 4.024, 140, 0, 0)
        self.flippy.initializeBodyCollisions('toon')
        self.interactiveOn = True
        self.flippyPhrase = None
        self.accept(SpeedChatGlobals.SCStaticTextMsgEvent, self.phraseSaidToFlippy)
        return

    def stopInteractiveFlippy(self):
        self.ignore(SpeedChatGlobals.SCStaticTextMsgEvent)
        self.interactiveOn = False

    def phraseSaidToFlippy(self, phraseId):
        if self.flippy.nametag.getChat() != '':
            return
        if Vec3(base.localAvatar.getPos(self.flippy)).length() > 10:
            return
        for phraseIdList in InterimElectionGlobals.FlippyPhraseIds:
            if phraseId in phraseIdList:
                self.sendUpdate('phraseSaidToFlippy', [phraseId])
                break

    def flippySpeech(self, avId, phraseId):
        av = self.cr.doId2do.get(avId)
        if not av:
            self.notify.warning('Received unknown avId in flippySpeech from the AI.')
            return
        if not self.interactiveOn:
            self.notify.warning('Received flippySpeech from AI while Interactive Flippy is disabled on our client.')
            return
        if self.flippy.nametag.getChat() != '':
            return
        if phraseId == 1:
            taskMgr.doMethodLater(InterimElectionGlobals.FlippyDelayResponse, self.flippy.setChatAbsolute, 'interactive-flippy-chat-task', extraArgs=[
             choice(InterimElectionGlobals.FlippyGibPies).replace('__NAME__', av.getName()), CFSpeech | CFTimeout])
            return
        if len(InterimElectionGlobals.FlippyPhraseIds) != len(InterimElectionGlobals.FlippyPhrases):
            raise Exception('There is a mismatch in the number of phraseIds and the number of phrases for Flippy Interactive!')
            return
        for index, phraseIdList in enumerate(InterimElectionGlobals.FlippyPhraseIds):
            for pid in phraseIdList:
                if pid == phraseId:
                    taskMgr.doMethodLater(InterimElectionGlobals.FlippyDelayResponse, self.flippy.setChatAbsolute, 'interactive-flippy-chat-task', extraArgs=[
                     InterimElectionGlobals.FlippyPhrases[index].replace('__NAME__', av.getName()), CFSpeech | CFTimeout])
                    return

    def handleWheelbarrowCollisionSphereEnter(self, collEntry):
        if base.localAvatar.numPies >= 0 and base.localAvatar.numPies < 20:
            self.sendUpdate('wheelbarrowAvatarEnter', [])
            self.restockSfx.play()

    def enterEvent(self, offset):
        base.cr.playGame.hood.loader.music.stop()

    def catchUp(self):
        if self.finishedPreShow:
            self.cameras = []
            for cameraId in base.cr.cameraManager.cameraIds:
                if cameraId in base.cr.doId2do:
                    self.cameras.append(base.cr.doId2do[cameraId])

            self.alec.show()
            self.alec.addActive()
            self.alec.startBlink()
            base.cr.cameraManager.tv.show()
            base.cr.cameraManager.tv.setPos(87.85, -0.25, 21.0)
            base.cr.cameraManager.tvIdle.loop()
        if self.finishedBegin:
            for character in self.characters:
                character.reparentTo(self.showFloor)
                character.useLOD(1000)
                character.addActive()
                character.startBlink()
                character.initializeBodyCollisions('toon')
                character.head = character.find('**/__Actor_head')
                character.setH(90)

            self.alec.reparentTo(self.showFloor)
            self.alec.useLOD(1000)
            self.alec.addActive()
            self.alec.startBlink()
            self.alec.initializeBodyCollisions('toon')
            self.alec.head = self.alec.find('**/__Actor_head')
            self.alec.setH(90)
            self.ignore('enter' + self.pieCollision.node().getName())
            self.alec.setPos(-4.5, -0.14, 3.13)
            self.oldman.setPos(1, 9, 3.03)
            self.surleeR.show()
            self.bob.reparentTo(render)
            self.bob.hide()
            self.bob.removeActive()
            self.larry.reparentTo(render)
            self.larry.hide()
            self.larry.removeActive()
            if not hasattr(self, 'surleeHallInterval'):
                self.surleeR.setPosHpr(-32, -15, 0, -40, 0, 0)
            if not hasattr(self, 'flippyHallInterval'):
                self.flippy.setPosHpr(2, -10, 3.23, 90, 0, 0)
        if self.finishedCogLanding:
            self.alec.setPosHpr(18.0, 41.2, 0, -130, 0, 0)
            self.flippy.hide()
            self.flippy.removeActive()
            self.surleeR.setPosHpr(-32, -15, 0, 90, 0, 0)
            self.oldman.reparentTo(render)
            self.oldman.setPosHpr(28.218, 5.53, 4.025, 130, 0, 0)
            self.accept('enter' + self.pieCollision.node().getName(), self.handleWheelbarrowCollisionSphereEnter)
            self.suit.removeActive()
            self.bags.removeActive()
            self.suit.hide()
            self.bags.hide()
        if self.finishedInvasion:
            base.cr.cameraManager.disableScreen()
            self.surlee.setPosHpr(-32, -15, 0, 40, 0, 0)
            self.flippy.setPosHpr(-38, -18.5, 0, 75, 0, 0)
            self.alec.setPosHpr(18.0, 41.2, 0, -130, 0, 0)
        if self.finishedInvasionEnding:
            self.alec.setPosHpr(3, -7, 3.23, 165, 0, 0)
            self.flippy.setPos(2, -10, 3.23)
            self.flippy.setH(90)

    def enterPreShow(self, offset):
        self.cameras = []
        for cameraId in base.cr.cameraManager.cameraIds:
            self.cameras.append(base.cr.doId2do[cameraId])

        self.surleeLeaveInterval = Sequence(Wait(7), Parallel(Func(self.moveCamera, 3, 49, 14, 8, 213, 0), Func(base.cr.cameraManager.setMainCamera, self.cameras[0].getDoId())), Func(self.moveCamera, 0, 59, 12, 9, 237, 0), Parallel(Func(self.moveCamera, 1, 80, 20, 9.2, -180, 0), Func(self.moveCamera, 2, 72.5, -18, 9, 314, 0)), Wait(3), Func(self.alec.setChatAbsolute, "You heard them! The Election's about to start! Ooo, this is better than Christmas!", CFSpeech | CFTimeout), Wait(1), Func(base.cr.cameraManager.tvFlyIn.start), Wait(4), self.alec.head.hprInterval(1, (75,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           30,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0), blendType='easeInOut'), Wait(1), Func(self.alec.setChatAbsolute, 'Of course, we have the TV broadcasting the Election.', CFSpeech | CFTimeout), self.alec.head.hprInterval(1, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0), blendType='easeInOut'), Wait(5), Func(self.alec.setChatAbsolute, 'Here come the candidates now!', CFSpeech | CFTimeout), Wait(3), Func(base.cr.cameraManager.setMainCamera, self.cameras[0].getDoId()), Func(self.moveCamera, 3, 39, -2, 7, 572, 0))
        self.surleeLeaveInterval.start()
        self.surleeLeaveInterval.setT(offset)

    def enterBegin(self, offset):
        self.finishedPreShow = True
        self.catchUp()
        for character in self.characters:
            character.reparentTo(self.showFloor)
            character.setPosHpr(35, -0.3, 0, 90, 0, 0)
            character.useLOD(1000)
            character.addActive()
            character.startBlink()
            character.head = character.find('**/__Actor_head')

        self.surleeR.reparentTo(self.showFloor)
        self.surleeR.useLOD(1000)
        self.surleeR.addActive()
        self.surleeR.startBlink()
        self.surleeR.initializeBodyCollisions('toon')
        self.surleeR.head = character.find('**/__Actor_head')
        self.surleeR.setPosHpr(35, -0.3, 0, -90, 0, 0)
        self.surleeR.show()
        self.bob.reparentTo(render)
        self.bob.hide()
        self.bob.removeActive()
        self.larry.reparentTo(render)
        self.larry.hide()
        self.larry.removeActive()
        musicIntro = base.loadMusic(InterimElectionGlobals.IntroMusic)
        self.ignore('enter' + self.pieCollision.node().getName())
        self.oldmanHallInterval = Sequence(Parallel(Func(self.oldman.loop, 'walk'), Func(base.playMusic, musicIntro, looping=0, volume=0.8)), self.oldman.posInterval(2.5, (12.96,
                                                                                                                                                                            -0.38,
                                                                                                                                                                            0)), self.oldman.posHprInterval(2, (4.3,
                                                                                                                                                                                                                2.72,
                                                                                                                                                                                                                3.13), (70,
                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                        0)), self.oldman.posHprInterval(1, (2.36,
                                                                                                                                                                                                                                                            5.18,
                                                                                                                                                                                                                                                            3.08), (40,
                                                                                                                                                                                                                                                                    0,
                                                                                                                                                                                                                                                                    0)), self.oldman.posHprInterval(1, (1,
                                                                                                                                                                                                                                                                                                        9,
                                                                                                                                                                                                                                                                                                        3.03), (90,
                                                                                                                                                                                                                                                                                                                0,
                                                                                                                                                                                                                                                                                                                0)), Func(self.oldman.loop, 'neutral'))
        self.surleeHallInterval = Sequence(Wait(1), Func(self.surleeR.loop, 'walk'), Func(self.surleeR.setChatAbsolute, "Flippy, you don't understand... My readings have been off the charts! We must be-", CFSpeech | CFTimeout), self.surleeR.posInterval(3, (12.96,
                                                                                                                                                                                                                                                                 -0.38,
                                                                                                                                                                                                                                                                 0)), self.surleeR.posHprInterval(1, (3.3,
                                                                                                                                                                                                                                                                                                      -2.39,
                                                                                                                                                                                                                                                                                                      3.13), (-60,
                                                                                                                                                                                                                                                                                                              0,
                                                                                                                                                                                                                                                                                                              0)), self.surleeR.posHprInterval(1, (2.49,
                                                                                                                                                                                                                                                                                                                                                   -6.09,
                                                                                                                                                                                                                                                                                                                                                   3.17), (-25,
                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                           0)), self.surleeR.posHprInterval(1, (2,
                                                                                                                                                                                                                                                                                                                                                                                                -10,
                                                                                                                                                                                                                                                                                                                                                                                                3.23), (0,
                                                                                                                                                                                                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                                                                                                                                                                                                        0)), Func(self.surleeR.loop, 'neutral'), Wait(1), Func(self.surleeR.setChatAbsolute, 'I have a bad feeling about all of this...', CFSpeech | CFTimeout), Wait(2), Func(self.surleeR.animFSM.request, 'TeleportOut'), Func(self.surleeR.setChatAbsolute, '', CFSpeech | CFTimeout), Wait(4), Func(self.surleeR.setPosHpr, -32, -15, 0, -40, 0, 0), Func(self.surleeR.animFSM.request, 'TeleportIn'), Wait(2), Func(self.surleeR.animFSM.request, 'neutral'))
        self.flippyHallInterval = Sequence(Wait(2), Func(self.flippy.loop, 'walk'), self.flippy.posInterval(3, (12.96,
                                                                                                                -0.38,
                                                                                                                0)), Func(self.flippy.setChatAbsolute, "Don't worry, Surlee! I just know whatever the winner plans, the Cogs will be blown right out of the sky by the fun!", CFSpeech | CFTimeout), self.flippy.posHprInterval(1, (3.3,
                                                                                                                                                                                                                                                                                                                                    -2.39,
                                                                                                                                                                                                                                                                                                                                    3.13), (120,
                                                                                                                                                                                                                                                                                                                                            0,
                                                                                                                                                                                                                                                                                                                                            0)), self.flippy.posHprInterval(1, (2.49,
                                                                                                                                                                                                                                                                                                                                                                                -6.09,
                                                                                                                                                                                                                                                                                                                                                                                3.17), (155,
                                                                                                                                                                                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                                                                                                                                                                                        0)), Func(self.flippy.loop, 'neutral'), Wait(6), Func(self.flippy.setChatAbsolute, '', CFSpeech | CFTimeout), Func(self.flippy.loop, 'walk'), self.flippy.posHprInterval(1, (2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     -10,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     3.23), (90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0)), Func(self.flippy.loop, 'neutral'))
        self.oldmanHallInterval.start()
        self.oldmanHallInterval.setT(offset)
        self.flippyHallInterval.start()
        self.flippyHallInterval.setT(offset)
        self.surleeHallInterval.start()
        self.surleeHallInterval.setT(offset)

    def exitBegin(self):
        self.oldmanHallInterval.finish()
        try:
            self.surleeLeaveInterval.finish()
        except:
            self.notify.warning("surleeLeaveInterval couldn't be finished!")

    def enterAlecSpeech(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.catchUp()
        self.alecSpeech = Sequence(Func(self.alec.setChatAbsolute, 'Hellooo Toontown~!', CFSpeech | CFTimeout), Wait(2), self.oldman.head.hprInterval(1, (20,
                                                                                                                                                          3,
                                                                                                                                                          0), blendType='easeInOut'), Wait(1), Func(self.alec.setChatAbsolute, "As many of you know, I'm your Hilarious Host and Eccentric Elector: Alec Tinn!", CFSpeech | CFTimeout), Wait(8.5), Func(self.alec.setChatAbsolute, "I haven't done this job in a while, but it's great to be to be back! We can't forget our two Toontastic candidates...", CFSpeech | CFTimeout), Wait(9), Func(self.alec.setChatAbsolute, "Flippy Doggenbottom and Lil' Oldman!", CFSpeech | CFTimeout), Wait(3.3), Func(self.flippy.play, 'wave'), ActorInterval(self.oldman, 'bow', startFrame=0, endFrame=33), ActorInterval(self.oldman, 'slip-forward'), Func(self.flippy.loop, 'neutral'), Wait(1.2), Func(self.oldman.loop, 'neutral'), Func(self.alec.setChatAbsolute, "The votes have been tallied, and now it's time to determine the new Interim Toon Council President!", CFSpeech | CFTimeout), Wait(6), Func(self.alec.setChatAbsolute, "Oooh, boy! The anticipation's eating me alive!", CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, 'Oldman? Flippy? Anything to say before the moment of truth?', CFSpeech | CFTimeout), Wait(8), Func(base.cr.cameraManager.setMainCamera, self.cameras[1].getDoId()), Func(self.oldman.setChatAbsolute, 'Sure do, Alec!', CFSpeech | CFTimeout), Wait(2), Parallel(self.flippy.head.hprInterval(1, (-70,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0), blendType='easeInOut'), Sequence(Wait(0.5), self.alec.head.hprInterval(1, (-70,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0), blendType='easeInOut'))), Wait(3), Func(self.oldman.setChatAbsolute, "Toons, I hope you all enjoyed givin' those cogs a smack in the face during my campaign!", CFSpeech | CFTimeout), Wait(8), Func(self.oldman.setChatAbsolute, "Even after today, we must focus our greatest efforts on putting them stinkin' businessmen six feet under!", CFSpeech | CFTimeout), Wait(7), Func(self.oldman.setChatAbsolute, "Flippy, I've said all I can. Anything from you?", CFSpeech | CFTimeout), Wait(3), self.flippy.head.hprInterval(1, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0), blendType='easeInOut'), Wait(1), Func(base.cr.cameraManager.setMainCamera, self.cameras[2].getDoId()), Func(self.flippy.setChatAbsolute, "Yes, Oldman. Toons, it's great to be back up on this stage once again.", CFSpeech | CFTimeout), Wait(1), self.alec.head.hprInterval(2, (70,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0), blendType='easeInOut'), Wait(5), Func(self.flippy.setChatAbsolute, "However, we're all here through the sacrifice of one Toon- Slappy Quackintosh.", CFSpeech | CFTimeout), Wait(8), Func(self.flippy.setChatAbsolute, 'Over 12 years ago, a Cog flew down right upon this stage with a business proposal to our new President.', CFSpeech | CFTimeout), Wait(8), Func(self.flippy.setChatAbsolute, 'Luckily, new technology at Loony Labs has made sure there are no Cogs to fly from the sky this time!', CFSpeech | CFTimeout), Wait(8), Func(self.flippy.setChatAbsolute, 'Whatever the outcome may be, I too believe we can Toon-Up these Cogs enough to send them out of business!', CFSpeech | CFTimeout), Wait(8), self.oldman.head.hprInterval(1, (70,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0), blendType='easeInOut'), Wait(3), Func(base.cr.cameraManager.setMainCamera, self.cameras[0].getDoId()), Func(self.alec.setChatAbsolute, 'Great words of wisdom, Oldman and Flippy.', CFSpeech | CFTimeout), self.alec.head.hprInterval(1, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         0), blendType='easeInOut'), Wait(1), self.flippy.head.hprInterval(1, (-25,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0), blendType='easeInOut'), Wait(1), self.oldman.head.hprInterval(1, (20,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     3,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0), blendType='easeInOut'), Wait(1), Func(self.alec.setChatAbsolute, "But that's that, let's get to the exciting part! The results!", CFSpeech | CFTimeout), Wait(7), Func(self.alec.setChatAbsolute, "You Toons ready? I won't keep you waiting any longer...", CFSpeech | CFTimeout), Wait(8), Func(self.alec.setChatAbsolute, 'ACTIVATE THE COUNTERS!!', CFSpeech | CFTimeout))
        self.alecSpeech.start()
        self.alecSpeech.setT(offset)

    def exitAlecSpeech(self):
        self.alecSpeech.finish()
        try:
            self.surleeHallInterval.finish()
            self.flippyHallInterval.finish()
        except:
            self.notify.warning("surleeHallInterval and flippyHallInterval couldn't be finished!")

    def enterVoteBuildup(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.catchUp()
        sfxDrumroll = loader.loadSfx('phase_4/audio/sfx/IE_Drumroll.ogg')
        musicCounters = base.loadMusic(InterimElectionGlobals.CountersMusic)
        self.buildupSequence = Sequence(Parallel(Func(self.counterLeft.play, 'body'), Func(self.counterRight.play, 'body')), Wait(3.7), Func(base.playSfx, sfxDrumroll), Func(self.alec.setChatAbsolute, 'The winner is...', CFSpeech | CFTimeout), Func(base.playMusic, musicCounters, looping=0), Wait(3.3), Func(self.alec.setChatAbsolute, 'Ooo! The numbers are so close!', CFSpeech | CFTimeout), Wait(3), Parallel(LerpFunctionInterval(self.counterLeft.setPlayRate, fromData=1, toData=0, duration=3.0, blendType='easeInOut', extraArgs=[
         'body'], name=None), LerpFunctionInterval(self.counterRight.setPlayRate, fromData=1, toData=0, duration=3.0, blendType='easeInOut', extraArgs=[
         'body'], name=None), Func(self.sky.reparentTo, camera), Func(self.beginSkySequence.start)), Func(self.alec.setChatAbsolute, 'Wait, what? Sorry folks, it seems the electoral counters have-', CFSpeech | CFTimeout), Wait(2))
        self.buildupSequence.start()
        self.buildupSequence.setT(offset)
        return

    def createBounceTrack(self, nodeObj, numBounces, startScale, totalTime, slowInitBounce=0.0):
        if not nodeObj or numBounces < 1 or startScale == 0.0 or totalTime == 0:
            self.notify.warning('createBounceTrack called with invalid parameter')
            return
        result = Sequence()
        numBounces += 1
        if slowInitBounce:
            bounceTime = totalTime / (numBounces + slowInitBounce - 1.0)
        else:
            bounceTime = totalTime / float(numBounces)
        if slowInitBounce:
            currTime = bounceTime * float(slowInitBounce)
        else:
            currTime = bounceTime
        realScale = nodeObj.getScale()
        currScaleDiff = startScale - realScale[2]
        for currBounceScale in range(numBounces):
            if currBounceScale == numBounces - 1:
                currScale = realScale[2]
            elif currBounceScale % 2:
                currScale = realScale[2] - currScaleDiff
            else:
                currScale = realScale[2] + currScaleDiff
            result.append(LerpScaleInterval(nodeObj, currTime, Vec3(realScale[0], realScale[1], currScale), blendType='easeInOut'))
            currScaleDiff *= 0.5
            currTime = bounceTime

        return result

    def adjustColorScale(self, scale, node):
        node.setColorScale(scale, scale, scale, 1)

    def normalizeElevator(self):
        self.elevatorNodePath.setScale(render, Vec3(1, 1, 1))
        self.elevatorNodePath.setPosHpr(0, 0, 0, 0, 0, 0)

    def loadElevator(self, newNP, cogdo=True):
        LIGHT_OFF_COLOR = Vec4(0.5, 0.5, 0.5, 1.0)
        LIGHT_ON_COLOR = Vec4(1.0, 1.0, 1.0, 1.0)
        self.floorIndicator = [None, 
         None, 
         None, 
         None, 
         None]
        self.elevatorNodePath = hidden.attachNewNode('elevatorNodePath')
        if cogdo:
            self.elevatorModel = loader.loadModel('phase_5/models/cogdominium/tt_m_ara_csa_elevatorB')
        else:
            self.elevatorModel = loader.loadModel('phase_4/models/modules/elevator')
            npc = self.elevatorModel.findAllMatches('**/floor_light_?;+s')
            for i in range(npc.getNumPaths()):
                np = npc.getPath(i)
                floor = int(np.getName()[-1:]) - 1
                self.floorIndicator[floor] = np
                if floor < self.numFloors:
                    np.setColor(LIGHT_OFF_COLOR)
                else:
                    np.hide()

        self.elevatorModel.reparentTo(self.elevatorNodePath)
        self.leftDoor = self.elevatorModel.find('**/left-door')
        if self.leftDoor.isEmpty():
            self.leftDoor = self.elevatorModel.find('**/left_door')
        self.rightDoor = self.elevatorModel.find('**/right-door')
        if self.rightDoor.isEmpty():
            self.rightDoor = self.elevatorModel.find('**/right_door')
        self.suitDoorOrigin = newNP.find('**/*_door_origin')
        self.elevatorNodePath.reparentTo(self.suitDoorOrigin)
        self.normalizeElevator()
        self.suitDoorOrigin.reparentTo(self.suitDoorOrigin.getParent().getParent())
        return

    def animToCogdo(self, timeStamp):
        self.cogdo.reparentTo(render)
        self.cogdoWalls.reparentTo(render)
        TO_SUIT_BLDG_TIME = 8
        self.loadElevator(self.cogdo, cogdo=True)
        closeDoors(self.leftDoor, self.rightDoor)
        self.cogDropSound = base.loadSfx('phase_5/audio/sfx/cogbldg_drop.ogg')
        self.cogLandSound = base.loadSfx('phase_5/audio/sfx/cogbldg_land.ogg')
        self.cogSettleSound = base.loadSfx('phase_5/audio/sfx/cogbldg_settle.ogg')
        self.openSfx = base.loadSfx('phase_5/audio/sfx/elevator_door_open.ogg')
        soundPlayed = 0
        tracks = Parallel(name=self.taskName('toCogdoTrack'))
        timeForDrop = TO_SUIT_BLDG_TIME * 0.85
        for i in self.cogdoList:
            showTrack = Sequence(name=self.taskName('ToCogdoFlatsTrack') + '-' + str(self.cogdoList.index(i)))
            showTrack.append(Func(i.unstash))
            if i == self.cogdo:
                self.elevatorNodePath.setScale(render, Vec3(1, 1, 1))
                self.elevatorNodePath.setPosHpr(0, 0, 0, 0, 0, 0)
            if not soundPlayed:
                showTrack.append(Func(base.playSfx, self.cogDropSound, 0, 1, None, 0.0))
            showTrack.append(LerpPosInterval(i, timeForDrop, i.getPos() - (0, 0, 125), name=self.taskName('ToCogdoAnim') + '-' + str(self.cogdoList.index(i))))
            if not soundPlayed:
                showTrack.append(Func(base.playSfx, self.cogLandSound, 0, 1, None, 0.0))
            showTrack.append(self.createBounceTrack(i, 2, 0.65, TO_SUIT_BLDG_TIME - timeForDrop, slowInitBounce=1.0))
            if not soundPlayed:
                showTrack.append(Func(base.playSfx, self.cogSettleSound, 0, 1, None, 0.0))
            tracks.append(showTrack)
            if not soundPlayed:
                soundPlayed = 1

        for i in self.bldgList:
            hideTrack = Sequence(name=self.taskName('ToCogdoToonFlatsTrack'))
            timeTillSquish = 105.0 / 125
            timeTillSquish *= timeForDrop
            hideTrack.append(LerpFunctionInterval(self.adjustColorScale, fromData=1, toData=0.25, duration=timeTillSquish, extraArgs=[i]))
            hideTrack.append(LerpScaleInterval(i, timeForDrop - timeTillSquish, Vec3(1, 1, 0.01)))
            hideTrack.append(Func(i.stash))
            hideTrack.append(Func(i.setScale, Vec3(1)))
            hideTrack.append(Func(i.clearColorScale))
            tracks.append(hideTrack)

        self.transitionTrack = tracks
        self.transitionTrack.start(timeStamp)
        return

    def enterCogLanding(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.catchUp()
        musicFakeCredits = base.loadMusic(InterimElectionGlobals.FakeCreditsMusic)
        musicSad = base.loadMusic(InterimElectionGlobals.SadMusic)
        sfxSad = loader.loadSfx('phase_5/audio/sfx/ENC_Lose.ogg')
        weddingcake = BattleProps.globalPropPool.getProp('wedding-cake')
        weddingcake.setScale(0)
        sfxCake = loader.loadSfx('phase_5/audio/sfx/AA_throw_wedding_cake.ogg')
        sfxCakeSplat = loader.loadSfx('phase_5/audio/sfx/AA_throw_wedding_cake_cog.ogg')
        sfxCogLose = loader.loadSfx('phase_3.5/audio/sfx/Cog_Death.ogg')
        sfxEye = loader.loadSfx('phase_5/audio/sfx/SA_evil_eye.ogg')
        sfxExplode = loader.loadSfx('phase_3.5/audio/sfx/ENC_cogfall_apart.ogg')
        eye = globalPropPool.getProp('evil-eye')
        eye.setScale(0)
        eye.reparentTo(self.suit)
        eye.setPosHpr(-0.64, 4.45, 5.91, -155.0, -20.0, 0.0)
        explosion = loader.loadModel('phase_3.5/models/props/explosion')
        explosion.setBillboardPointEye()
        explosion.setPos(0, 0, 2)
        placeholder = render.attachNewNode('explosion-placeholder')
        placeholder.setPos(-61.255, -8.315, 1.975)
        base.staticsnd.setVolume(0)
        base.static.unstash()
        base.static.setTransparency(1)
        base.static.setColorScale(1, 1, 1, 0)
        self.bob.setPosHpr(76.52, 37.969, 4.025, -180, 0, 0)
        self.larry.setPosHpr(60.965, -36.268, 6.051, 0, 0, 0)
        from direct.gui.OnscreenText import OnscreenText
        from direct.gui.OnscreenImage import OnscreenImage
        from toontown.credits import OfflineCredits
        self.logano = OfflineCredits.Logano(True)
        self.logano.load()
        self.bd = OfflineCredits.CreditsScenes[1]
        self.bd.load()
        self.sparkpin = OfflineCredits.CreditsScenes[2]
        self.sparkpin.load()
        self.rocky = OfflineCredits.FakeRockyCredit
        self.rocky.load()
        mtrack = self.suit.beginSupaFlyMove(VBase3(-40.645, -5.602, -1.325), 0, 'flyAway')
        bagsFlyIn = self.bags.beginSupaFlyMove(VBase3(-42.473, -82.058, 0.525), 1, 'flyIn', walkAfterLanding=False)
        self.logo = loader.loadModel('phase_3/models/gui/toontown-logo')
        self.logo.reparentTo(aspect2d)
        self.logo.setTransparency(1)
        self.logo.setScale(0.75, 0.6, 0.6)
        self.logo.setPos(0, 1, 0.3)
        self.logo.setColorScale(1, 1, 1, 0)

        def doFade(elements, alpha, len=0.5):
            for node in elements:
                Sequence(node.colorScaleInterval(len, (1, 1, 1, alpha))).start()

        self.preposteraAnimation = Sequence(ActorInterval(self.preposteraR, 'scientistEmcee', startFrame=251, endFrame=314), ActorInterval(self.preposteraR, 'scientistEmcee', startFrame=314, endFrame=251))
        self.bagsSequence = Sequence(Parallel(Func(self.bags.reparentTo, render), Func(self.bags.addActive)), Func(bagsFlyIn.start), Wait(7), Func(self.bags.loop, 'walk'), self.bags.posInterval(2, (-41.627,
                                                                                                                                                                                                      -109.128,
                                                                                                                                                                                                      0.525)), Parallel(Func(self.bags.hide), Func(self.bags.removeActive)), Func(self.animToCogdo, offset))
        self.eyeSequence = Sequence(Func(base.playSfx, sfxEye, volume=0.9), eye.scaleInterval(1, (11,
                                                                                                  11,
                                                                                                  11)), Wait(0.7), Func(eye.wrtReparentTo, render), eye.posInterval(1, (-61.255,
                                                                                                                                                                        -8.315,
                                                                                                                                                                        2.475)), Func(eye.hide), Func(self.radar.reparentTo, hidden), Func(base.playSfx, sfxExplode, volume=0.9), Func(explosion.reparentTo, placeholder), Wait(0.6), Func(explosion.removeNode), Wait(2), Func(self.bagsSequence.start, offset), Wait(2), Func(self.preposteraAnimation.finish), ActorInterval(self.preposteraR, 'duck', endTime=1.2), Func(self.preposteraR.animFSM.request, 'TeleportOut'), Wait(4), Func(self.preposteraR.removeActive), Func(self.preposteraR.hide), Wait(3), ActorInterval(self.dimm, 'duck', endTime=1.2), Func(self.dimm.animFSM.request, 'TeleportOut'), Wait(4), Func(self.dimm.removeActive), Func(self.dimm.hide))
        self.eyeSequence2 = Sequence(Parallel(Func(eye.setScale, 0), Func(eye.reparentTo, self.suit), Func(eye.show), Func(eye.setPosHpr, -0.64, 4.45, 5.91, -155.0, -20.0, 0.0)), Func(base.playSfx, sfxEye, volume=0.9), eye.scaleInterval(1, (11,
                                                                                                                                                                                                                                                 11,
                                                                                                                                                                                                                                                 11)), Wait(0.7), Func(eye.wrtReparentTo, render), eye.posInterval(1, (-16.313,
                                                                                                                                                                                                                                                                                                                       -5.602,
                                                                                                                                                                                                                                                                                                                       2.525)), Func(eye.removeNode))
        self.alecRunAway = Sequence(Func(self.alec.loop, 'walk'), self.alec.posInterval(1, (4.2,
                                                                                            -0.25,
                                                                                            3.13)), self.alec.posHprInterval(3, (12.9,
                                                                                                                                 -3.3,
                                                                                                                                 0), (0,
                                                                                                                                      0,
                                                                                                                                      0)), Func(self.alec.loop, 'neutral'), Wait(0.5), Func(self.alec.loop, 'run'), self.alec.posInterval(3, (18.0,
                                                                                                                                                                                                                                              41.2,
                                                                                                                                                                                                                                              0)), Func(self.alec.loop, 'walk'), self.alec.hprInterval(1.3, (-130,
                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                             0)), Func(self.alec.loop, 'neutral'), Func(self.startInteractiveAlec))
        self.oldmanGo = Sequence(Func(self.oldman.wrtReparentTo, render), Func(self.oldman.loop, 'run'), self.oldman.posHprInterval(3, (80.538,
                                                                                                                                        14.491,
                                                                                                                                        6.935), (0,
                                                                                                                                                 0,
                                                                                                                                                 0)), Func(self.oldman.play, 'jump'), self.oldman.posInterval(2, (78.9,
                                                                                                                                                                                                                  19.635,
                                                                                                                                                                                                                  4.025)), Func(self.oldman.loop, 'walk'), self.oldman.posInterval(1, (78.9,
                                                                                                                                                                                                                                                                                       29.936,
                                                                                                                                                                                                                                                                                       4.025)), self.oldman.hprInterval(1, (90,
                                                                                                                                                                                                                                                                                                                            0,
                                                                                                                                                                                                                                                                                                                            0)), Func(self.oldman.loop, 'run'), self.oldman.posInterval(2, (47.963,
                                                                                                                                                                                                                                                                                                                                                                                            29.936,
                                                                                                                                                                                                                                                                                                                                                                                            4.025)), Func(self.oldman.loop, 'walk'), self.oldman.hprInterval(1, (150,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0)), Func(self.oldman.loop, 'run'), self.oldman.posHprInterval(3, (28.218,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    5.53,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    4.025), (130,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0)), Func(self.oldman.loop, 'neutral'))
        self.spinSound = Sequence(Wait(0.6), SoundInterval(sfxCogLose, duration=1.2, startTime=1.5, volume=0.2, node=self.suitLose), SoundInterval(sfxCogLose, duration=3.0, startTime=0.6, volume=0.8, node=self.suitLose))
        self.cogSequence = Sequence(Parallel(Func(self.moveCamera, 1, -22, -34, 7, 53, 0), Func(base.cr.cameraManager.setMainCamera, self.cameras[1].getDoId())), Parallel(Func(self.suit.reparentTo, render), Func(self.suit.addActive), Func(self.suit.loop, 'walk')), Parallel(Func(self.prepostera.removeActive), Func(self.prepostera.stopBlink), Func(self.prepostera.hide), Func(self.preposteraR.reparentTo, render), Func(self.preposteraR.addActive), Func(self.preposteraR.startBlink), Func(self.preposteraAnimation.loop), Func(self.dimm.loop, 'ScientistWork')), self.suit.posHprInterval(2, (-160.478,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             9.963,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0.525), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      0)), self.suit.posHprInterval(4, (-119.127,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -2.123,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0.025), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0)), self.suit.posHprInterval(3, (-101.813,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -5.434,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -3.114), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0)), Parallel(self.suit.posHprInterval(1, (-92.45,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -5.37,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -0.843), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0)), Func(self.alec.setChatAbsolute, "Dear Walt! Surlee, I thought Cogs couldn't get in!", CFSpeech | CFTimeout), self.surleeR.hprInterval(1, (90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0)), Func(self.surleeR.loop, 'walk')), Parallel(self.suit.posHprInterval(1, (-80.96,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              -5.702,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              -3.065), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0)), Func(self.surleeR.loop, 'neutral')), self.suit.posHprInterval(0.5, (-79.298,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 -6.815,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 -2.224), (-95,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0)), self.suit.posHprInterval(1, (-74.215,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             -7.324,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             -1.975), (-95,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       0)), Parallel(self.suit.posHprInterval(2, (-69.72,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  -8.388,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  -1.975), (-95,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0)), Func(self.surleeR.setChatAbsolute, "They can't fly in; I didn't expect one to just WALK in!", CFSpeech | CFTimeout), Func(self.alecRunAway.start, offset)), Parallel(ActorInterval(self.suit, 'glower', startFrame=0, endFrame=30), Func(self.eyeSequence.start)), Wait(2.7), Parallel(ActorInterval(self.suit, 'glower', startFrame=30, endFrame=0), Func(self.flippy.animFSM.request, 'TeleportOut')), Parallel(Func(self.oldmanGo.start), Func(self.suit.loop, 'walk'), self.suit.posHprInterval(4, (-40.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         -5.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         -1.325), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0)), Func(self.moveCamera, 1, -16.953, -44.678, 7, 25, 0)), Func(self.suit.loop, 'neutral'), Func(self.flippy.reparentTo, render), Func(self.flippy.setPosHpr, -16.313, -5.602, 0.025, 90, 0, 0), Func(self.flippy.animFSM.request, 'TeleportIn'), Func(self.bob.show), Func(self.larry.show), Func(self.bob.addActive), Func(self.larry.addActive), Parallel(self.larry.posInterval(1, (60.965,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -23.561,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            6.051)), Func(self.larry.loop, 'walk')), Parallel(self.bob.posInterval(1, (76.52,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       31.01,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       4.025)), Func(self.bob.loop, 'walk'), Func(self.larry.loop, 'neutral')), Func(self.bob.loop, 'neutral'), Wait(2), Func(self.flippy.animFSM.request, 'neutral'), Func(self.flippy.setChatAbsolute, "Don't worry, I'll handle this.", CFSpeech | CFTimeout), Wait(3), Parallel(self.larry.hprInterval(1, (85,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0)), self.bob.hprInterval(1, (120,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0)), Func(self.bob.loop, 'walk'), Func(self.larry.loop, 'walk')), Parallel(Func(self.flippy.setChatAbsolute, "You should have learned not to invade the playground after last time, but you haven't.", CFSpeech | CFTimeout), Func(self.bob.loop, 'neutral'), Func(self.larry.loop, 'neutral')), Wait(5), Func(self.suit.setChatAbsolute, 'You say that without seeing what we have planned?', CFSpeech | CFTimeout, dialogue=self.speechQuestionSfx), Wait(3), Func(self.flippy.setChatAbsolute, 'Whatever you have planned... we have silliness and joy to counter it!', CFSpeech | CFTimeout), Wait(4), Func(self.suit.setChatAbsolute, "I doubt you'll have enough, \x01WLDisplay\x01\x01WLEnter\x01Mr.\x02\x02 President.", CFSpeech | CFTimeout, dialogue=self.speechMurmurSfx), Wait(4), Func(self.flippy.setChatAbsolute, "Ever since your last invasion, the Toons of Toontown have trained their gags until they're better than the best they can be.", CFSpeech | CFTimeout), Wait(9), Func(base.camera.wrtReparentTo, render), Func(base.localAvatar.stopUpdateSmartCamera), Func(base.localAvatar.shutdownSmartCamera), base.camera.posHprInterval(7, (-50.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 9.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 4.325), (-130,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          0), blendType='easeInOut'), Func(base.playMusic, musicFakeCredits, looping=0), Parallel(Func(base.playSfx, sfxCake, volume=0.9), ActorInterval(self.flippy, 'throw', startFrame=0, endFrame=46), Func(self.flippy.setChatAbsolute, 'Toons of the World...', CFSpeech | CFTimeout), Func(weddingcake.reparentTo, self.flippy.rightHand), weddingcake.scaleInterval(0.5, 1.4)), Wait(1), Func(self.suit.setChatAbsolute, 'Are you sure about that? You might want to double-check my na--', CFSpeech | CFTimeout, dialogue=self.speechQuestionSfx), Wait(3.5), Parallel(Sequence(ActorInterval(self.flippy, 'throw', startFrame=47, endFrame=91), Func(self.flippy.loop, 'neutral')), Func(NodePath(base.marginManager).hide), Func(NodePath(self.laffMeter).hide), Func(NodePath(self.book).hide), Func(NodePath(self.book2).hide), Func(self.flippy.setChatAbsolute, 'UNITE!', CFSpeech | CFTimeout), Sequence(Wait(0.6), Func(weddingcake.wrtReparentTo, render), ProjectileInterval(weddingcake, endPos=Point3(-40.645, -5.602, -1.325), duration=0.5), Func(weddingcake.removeNode), Parallel(ActorInterval(self.suit, 'pie-small-react'), Func(base.playSfx, sfxCakeSplat, volume=0.9), Func(self.suit.showHpText, -156)), Parallel(Func(self.suit.removeActive), Func(self.suit.hide), Func(self.suitLose.show), ActorInterval(self.suitLose, 'lose', startFrame=0, endFrame=83), Func(self.spinSound.start)), Func(self.suitLose.loop, 'lose', fromFrame=63, toFrame=83), Func(self.suit.makeSkeleton), Wait(2), Parallel(self.logo.posHprInterval(6.5, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         0.5), (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0), (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     1), blendType='easeOut'), self.logo.colorScaleInterval(6.5, Vec4(1, 1, 1, 1), blendType='easeOut'), base.camera.posHprInterval(7, (-40.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        13.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        13.325), (-180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0), blendType='easeInOut')), Wait(0.5), Parallel(self.flippy.hprInterval(1, (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0)), Func(self.flippy.loop, 'walk')), Func(self.flippy.loop, 'neutral'), Wait(3), Parallel(self.logo.colorScaleInterval(0.3, Vec4(1, 1, 1, 0))), Wait(2), Parallel(render.colorScaleInterval(0.5, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1)), self.logano.title.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1)), self.logano.description.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1)), self.logano.image.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1))), Wait(3), Parallel(self.logano.title.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0)), self.logano.description.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0)), self.logano.image.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0))), Func(doFade, self.bd.elements, 1), Wait(3), Func(doFade, self.bd.elements, 0), Parallel(Func(doFade, self.sparkpin.elements, 1), Func(self.bob.hide), Func(self.larry.hide), Func(self.bob.removeActive), Func(self.larry.removeActive)), Wait(1.5), Func(base.playSfx, base.staticsnd, looping=1), Parallel(base.static.colorScaleInterval(1, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       0.5)), Func(base.staticsnd.setVolume, 0.5), Func(doFade, self.sparkpin.elements, 0, 1)), Parallel(base.static.colorScaleInterval(1, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            0)), Func(base.staticsnd.setVolume, 0), Func(doFade, self.sparkpin.elements, 1, 1)), Func(doFade, self.sparkpin.elements, 0), Func(doFade, self.rocky.elements, 1), Wait(0.5), Parallel(base.static.colorScaleInterval(1, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       1)), Func(base.staticsnd.setVolume, 1), Func(doFade, self.rocky.elements, 0, 1)), Wait(3), Parallel(render.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           1)), base.static.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0)), Func(base.staticsnd.setVolume, 0), Func(musicFakeCredits.setVolume, 0)), Wait(2), base.camera.posHprInterval(3, (-50.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           9.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           4.325), (-130,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    0), blendType='easeInOut'), Wait(2), Parallel(ActorInterval(self.suitLose, 'lose', startFrame=114, endFrame=148), SoundInterval(sfxExplode, volume=0.32, node=self.suitLose)), Func(self.suit.addActive), Func(self.suit.setDisplayName, 'Skelecog\nLawbot\nLevel 11'), Func(self.suit.show), Func(self.suit.loop, 'neutral'), Func(self.suitLose.hide), Wait(2), Func(self.suit.setChatAbsolute, 'Not cooperating? Perhaps some Positive Reinforcement is in order.', CFSpeech | CFTimeout), Wait(1), Parallel(self.flippy.hprInterval(1, (90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0)), Func(self.flippy.loop, 'walk')), Func(self.flippy.loop, 'neutral'), Func(self.flippy.setChatAbsolute, 'Wait, what? I thought I-', CFSpeech | CFTimeout), Wait(2), Parallel(ActorInterval(self.suit, 'glower', startFrame=0, endFrame=30), Func(self.eyeSequence2.start)), Wait(1.7), Func(self.flippy.sadEyes), Func(self.flippy.play, 'lose'), Wait(1), Func(base.playSfx, sfxSad, volume=0.6), ActorInterval(self.suit, 'glower', startFrame=30, endFrame=0), Func(base.playMusic, musicSad, looping=0), Func(self.suit.loop, 'neutral'), Wait(1), self.flippy.scaleInterval(1.5, VBase3(0.01, 0.01, 0.01), blendType='easeInOut'), Wait(1.0), Func(self.oldman.setChatAbsolute, 'Oh no... Flippy...', CFSpeech | CFTimeout), Wait(1), Func(self.surleeR.setChatAbsolute, 'Dear Walt... what could have caused this?', CFSpeech | CFTimeout), Parallel(Func(mtrack.start), Func(self.suit.setChatAbsolute, 'The Chairman will be pleased about this.', CFSpeech | CFTimeout)), base.camera.posHprInterval(4, (-50.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     15.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     4.325), (-140,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              25,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0), blendType='easeInOut'), base.camera.posHprInterval(4, (40.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         -10.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         6.325), (-116,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0), blendType='easeInOut'))))
        self.cogSequence.start()
        self.cogSequence.setT(offset)

    def exitCogLanding(self):
        self.cogSequence.finish()

    def enterInvasion(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.finishedCogLanding = True
        self.catchUp()
        self.accept('enter' + self.pieCollision.node().getName(), self.handleWheelbarrowCollisionSphereEnter)
        self.surleeIntroInterval = Sequence(Func(base.cr.cameraManager.setMainCamera, self.cameras[3].getDoId()), Func(self.moveCamera, 4, 10, -31, 7, 651, 0), Func(self.surleeR.loop, 'walk'), Func(self.surleeR.setChatAbsolute, 'This is bad, VERY bad!', CFSpeech | CFTimeout), self.surleeR.posHprInterval(1, (-32,
                                                                                                                                                                                                                                                                                                                     -15,
                                                                                                                                                                                                                                                                                                                     0), (50,
                                                                                                                                                                                                                                                                                                                          0,
                                                                                                                                                                                                                                                                                                                          0)), Func(self.surleeR.loop, 'neutral'), Func(self.cameras[4].setState, 'Move', globalClockDelta.getRealNetworkTime(), 10, -24, 7, -263, 0, 0), Wait(1), Func(self.oldman.animFSM.request, 'neutral'), Wait(3), Func(self.surleeR.setChatAbsolute, 'With the Cog Radar broken, the Cogs will be flying in any second!', CFSpeech | CFTimeout), Wait(4), Func(self.surleeR.setChatAbsolute, "Hold them off for as long as you can! I've got a plan in mind, but it'll be tricky!", CFSpeech | CFTimeout), Wait(5), Func(self.surleeR.setChatAbsolute, "Toons of the World, let's save our town!", CFSpeech | CFTimeout), Wait(7), base.camera.posHprInterval(8, (40.645,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          -9.602,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          6.325), (-296,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0), blendType='easeInOut'), Func(NodePath(self.laffMeter).show), Func(NodePath(self.book).show), Func(NodePath(base.marginManager).show), Func(base.cr.cameraManager.disableScreen), Wait(3), Func(self.surleeR.setChatAbsolute, "Oldman, get cooking. These Cogs are top of the line, and they've brought their newest hires.", CFSpeech | CFTimeout), Func(base.localAvatar.attachCamera), Func(base.localAvatar.initializeSmartCamera), Func(base.localAvatar.startUpdateSmartCamera), Wait(4), Func(base.cr.cameraManager.setMainCamera, self.cameras[4].getDoId()), Func(self.oldman.setChatAbsolute, 'On it, Surlee.', CFSpeech | CFTimeout), Wait(3), Func(self.surleeR.setChatAbsolute, 'I need to go find some Resistance Rangers...', CFSpeech | CFTimeout), Func(self.surleeR.animFSM.request, 'TeleportOut'), Wait(5), Parallel(Func(self.surleeR.hide), Func(self.surleeR.removeActive)))
        self.surleeIntroInterval.start()
        self.surleeIntroInterval.setT(offset)

    def exitInvasion(self):
        self.surleeIntroInterval.finish()

    def enterInvasionEnd(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.finishedCogLanding = True
        self.finishedInvasion = True
        self.catchUp()
        pie = BattleProps.globalPropPool.getProp('creampie')
        pie.setScale(0)
        cake = BattleProps.globalPropPool.getProp('birthday-cake')
        cake.setScale(0)
        weddingcake = BattleProps.globalPropPool.getProp('wedding-cake')
        weddingcake.setScale(0)
        sfxCake = loader.loadSfx('phase_5/audio/sfx/AA_throw_wedding_cake.ogg')
        sfxCakeSplat = loader.loadSfx('phase_5/audio/sfx/AA_throw_wedding_cake_cog.ogg')
        sfxPieSplat = loader.loadSfx('phase_3.5/audio/sfx/AA_tart_only.ogg')
        messenger.send('invasionEndSequence', [offset])
        cakeSeq = Sequence(Func(self.flippy.loop, 'walk'), self.flippy.hprInterval(2, (0,
                                                                                       0,
                                                                                       0)), Func(self.flippy.loop, 'neutral'), Func(self.flippy.setChatAbsolute, 'Here we go...', CFSpeech | CFTimeout), Wait(3), Func(self.flippy.loop, 'run'), Parallel(self.flippy.posHprInterval(2.5, (-14,
                                                                                                                                                                                                                                                                                           -9,
                                                                                                                                                                                                                                                                                           0), (-90,
                                                                                                                                                                                                                                                                                                0,
                                                                                                                                                                                                                                                                                                0)), self.flippy.head.hprInterval(0.5, (-65,
                                                                                                                                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                                                                                                                                        0), blendType='easeInOut')), Func(self.flippy.play, 'jump'), Wait(0.45), self.flippy.posInterval(0.2, (-7.5,
                                                                                                                                                                                                                                                                                                                                                                                                                                               -9.2,
                                                                                                                                                                                                                                                                                                                                                                                                                                               3.5)), self.flippy.posInterval(0.4, (-4.2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -9.5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    3.23)), Func(self.flippy.loop, 'run'), Parallel(self.flippy.posHprInterval(1, (2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   -10,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   3.23), (75,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0)), self.flippy.head.hprInterval(0.5, (-5,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0), blendType='easeInOut')), Func(self.flippy.loop, 'neutral'), Wait(5.5), Parallel(ActorInterval(self.flippy, 'throw', startFrame=0, endFrame=46), Func(pie.reparentTo, self.flippy.rightHand), pie.scaleInterval(0.5, 1)), Parallel(Sequence(ActorInterval(self.flippy, 'throw', startFrame=47, endFrame=91), Func(self.flippy.loop, 'neutral')), Sequence(Wait(0.6), Func(self.flippy.setChatAbsolute, "That's for the election!", CFSpeech | CFTimeout), Func(pie.wrtReparentTo, render), ProjectileInterval(pie, endPos=Point3(36.5, -1.9, 11.0), duration=0.3), Func(base.playSfx, sfxPieSplat, volume=0.8), Func(self.sendUpdate, 'setSuitDamage', [36, False]), Func(pie.removeNode))), Wait(1), Parallel(ActorInterval(self.flippy, 'throw', startFrame=0, endFrame=46), Func(cake.reparentTo, self.flippy.rightHand), cake.scaleInterval(0.5, 1)), Parallel(Sequence(ActorInterval(self.flippy, 'throw', startFrame=47, endFrame=91), Func(self.flippy.loop, 'neutral')), Sequence(Wait(0.6), Func(self.flippy.setChatAbsolute, "THAT'S for Slappy!", CFSpeech | CFTimeout), Func(cake.wrtReparentTo, render), ProjectileInterval(cake, endPos=Point3(36.5, -1.9, 11.0), duration=0.3), Func(base.playSfx, sfxPieSplat, volume=1.0), Func(self.sendUpdate, 'setSuitDamage', [100, False]), Func(cake.removeNode))), Wait(1), Parallel(Func(base.playSfx, sfxCake, volume=0.9), ActorInterval(self.flippy, 'throw', startFrame=0, endFrame=46), Func(weddingcake.reparentTo, self.flippy.rightHand), weddingcake.scaleInterval(0.5, 1.4)), Parallel(Sequence(ActorInterval(self.flippy, 'throw', startFrame=47, endFrame=91), Func(self.flippy.loop, 'neutral')), Sequence(Wait(0.6), Func(self.flippy.setChatAbsolute, 'AND THIS IS FOR TOONTOWN!', CFSpeech | CFTimeout), Func(weddingcake.wrtReparentTo, render), ProjectileInterval(weddingcake, endPos=Point3(36.5, -1.9, 11.0), duration=0.3), Func(base.playSfx, sfxCakeSplat, volume=0.8), Func(self.sendUpdate, 'setSuitDamage', [200, True]), Func(weddingcake.removeNode))), Wait(10), Func(self.alec.loop, 'run'), Func(self.alec.setChatAbsolute, 'Flippy, you did it!', CFSpeech | CFTimeout), self.alec.posHprInterval(5, (12.9,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      -0.3,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      0), (180,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           0)), Parallel(self.alec.posHprInterval(1, (4.2,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      -3.25,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      3.13), (90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0)), Func(self.flippy.loop, 'walk'), self.flippy.hprInterval(1, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               0)), self.flippy.head.hprInterval(1, (15,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     0))), Func(self.flippy.loop, 'neutral'), self.alec.posHprInterval(1, (3,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           -7,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           3.23), (165,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   0)), Func(self.alec.loop, 'neutral'), Wait(4), Func(self.surleeR.setChatAbsolute, "Don't get too excited... We've only driven them back to the streets.", CFSpeech | CFTimeout), Wait(3), Func(self.flippy.loop, 'walk'), Parallel(self.flippy.hprInterval(1, (90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  0)), self.flippy.head.hprInterval(1, (0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0))), Func(self.flippy.loop, 'neutral'), Wait(4), Func(self.surleeR.setChatAbsolute, "The Cogs will be back, but I doubt we'll be seeing them in the playgrounds again after this battle.", CFSpeech | CFTimeout), Wait(7), Func(self.surleeR.setChatAbsolute, "All of you here today are heros, you're survivors!", CFSpeech | CFTimeout), Wait(7), Func(self.surleeR.setChatAbsolute, "And I'm sure our new President is very grateful.", CFSpeech | CFTimeout), Wait(6), Func(self.flippy.setChatAbsolute, 'Surlee, I...', CFSpeech | CFTimeout), Wait(5), Func(self.alec.setChatAbsolute, "He's right, Flippy. You're a hero, and you're the only leader we have left.", CFSpeech | CFTimeout), Wait(7), Func(self.flippy.setChatAbsolute, 'With a heavy heart, I hereby accept the Toon Council Presidency.', CFSpeech | CFTimeout), Wait(7), Func(self.flippy.setChatAbsolute, 'Only until these Cogs are gone, though.', CFSpeech | CFTimeout), Wait(7), Func(self.flippy.setChatAbsolute, "If we're going to get rid of them, we have to stand together.", CFSpeech | CFTimeout), Wait(7))
        cakeSeq.start()
        cakeSeq.setT(offset)

    def enterWrapUp(self, offset):
        self.finishedPreShow = True
        self.finishedBegin = True
        self.finishedCogLanding = True
        self.finishedInvasion = True
        self.finishedInvasionEnding = True
        self.catchUp()
        self.stopInteractiveAlec()
        NodePath(base.marginManager).hide()
        base.cr.credits.setLocalToonDetails(base.localAvatar.getName(), base.localAvatar.style)
        musicCredits = base.loadMusic(InterimElectionGlobals.CreditsMusic)
        base.localAvatar.stopUpdateSmartCamera()
        base.camera.wrtReparentTo(render)
        self.portal = loader.loadModel('phase_3.5/models/props/portal-mod')
        self.portal.reparentTo(render)
        self.portal.setPosHprScale(93.1, 0.4, 4, 4, 355, 45, 0, 0, 0)
        from direct.gui.OnscreenText import OnscreenText
        from direct.gui.OnscreenImage import OnscreenImage
        from toontown.credits import OfflineCredits
        self.logano = OfflineCredits.Logano(True)
        self.logano.load()
        self.laffMeter = base.localAvatar.laffMeter
        self.book = base.localAvatar.book.bookOpenButton
        self.book2 = base.localAvatar.book.bookCloseButton
        base.localAvatar.setPieType(0)
        base.localAvatar.setNumPies(0)
        base.localAvatar.disableAvatarControls()
        self.clearHudSeq = Sequence(Parallel(self.laffMeter.posInterval(10, (-0.5,
                                                                             0.0,
                                                                             0.13)), self.book.posInterval(10, (0.5,
                                                                                                                0.0,
                                                                                                                0.17)), self.book2.posInterval(10, (0.5,
                                                                                                                                                    0.0,
                                                                                                                                                    0.17))))
        self.wrapUpSequence = Sequence(Func(self.flippy.setChatAbsolute, 'Toons of the world...', CFSpeech | CFTimeout), Func(base.playMusic, musicCredits, looping=0, volume=0.8), Wait(4.5), Func(self.flippy.setChatAbsolute, 'UNITE!', CFSpeech | CFTimeout), Func(self.flippy.stopBlink), ActorInterval(self.flippy, 'victory', playRate=0.75, startFrame=0, endFrame=9), Func(base.camera.setPosHpr, 73, -9.5, 16, -90, -35, 0), Func(base.takeScreenShot), Wait(7.5), ActorInterval(self.flippy, 'victory', playRate=0.75, startFrame=9, endFrame=0), Wait(7.5), Parallel(self.logano.title.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            1)), self.logano.description.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1)), self.logano.image.colorScaleInterval(0.5, (1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1))), Func(base.cr.loginFSM.request, 'credits'))
        self.cameraSequence = Sequence(Func(base.cr.cameraManager.tvFlyOut.start), base.camera.posHprInterval(10, (75,
                                                                                                                   -9.5,
                                                                                                                   12), (-90,
                                                                                                                         -10,
                                                                                                                         0), blendType='easeInOut'), Func(self.wrapUpSequence.start), Wait(12), Parallel(self.logo.posHprScaleInterval(6.5, (0,
                                                                                                                                                                                                                                             0,
                                                                                                                                                                                                                                             0.5), 0, 1, blendType='easeOut'), self.logo.colorScaleInterval(6.5, Vec4(1, 1, 1, 1), blendType='easeOut'), base.camera.posHprInterval(7.5, (70,
                                                                                                                                                                                                                                                                                                                                                                                          0.6,
                                                                                                                                                                                                                                                                                                                                                                                          42.2), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                  0,
                                                                                                                                                                                                                                                                                                                                                                                                  0), blendType='easeInOut')), Parallel(self.logo.colorScaleInterval(0.3, Vec4(1, 1, 1, 0)), base.camera.posHprInterval(0.3, (85,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              42), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -30,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    0), blendType='easeIn')), Parallel(base.camera.posHprInterval(0.9, (95,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0.6,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        6), (-90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             -90,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0), blendType='easeOut'), self.portal.scaleInterval(0.5, 2)))
        self.clearHudSeq.start()
        self.clearHudSeq.setT(offset)
        self.cameraSequence.start()
        self.cameraSequence.setT(offset)

    def exitWrapUp(self):
        self.logo.removeNode()
        self.portal.removeNode()
        self.logano.title.removeNode()
        self.logano.description.removeNode()
        self.logano.image.removeNode()
        self.wrapUpSequence.finish()
        self.clearHudSeq.finish()
        self.cameraSequence.finish()

    def startInteractiveAlec(self):
        cs = CollisionSphere(0, 0, 0, 3)
        self.alecNode = self.alec.attachNewNode(CollisionNode('cnode'))
        self.alecNode.node().addSolid(cs)
        self.accept('enter' + self.alecNode.node().getName(), self.handleAlecCollision)

    def handleAlecCollision(self, collEntry):
        self.cowardSequence = Sequence(Parallel(ActorInterval(self.alec, 'cringe'), Func(self.alec.setChatAbsolute, "Don't hurt me!! Oh, phew. It's only you.", CFSpeech | CFTimeout)))
        self.cowardSequence.start()

    def stopInteractiveAlec(self):
        if self.alecNode:
            self.ignore('enter' + self.alecNode.node().getName())

    def moveCamera(self, id, x, y, z, h, p):
        self.cameras[id].setState('Move', globalClockDelta.getRealNetworkTime(), x, y, z, h, p, 0)

    def saySurleePhrase(self, phrase, interrupt, broadcast):
        self.oldman.setChatAbsolute(phrase, CFSpeech | CFTimeout, interrupt=interrupt)
        if broadcast and Vec3(base.localAvatar.getPos(self.oldman)).length() >= 15:
            base.localAvatar.setSystemMessage(0, self.oldman.getName() + ': ' + phrase, WTEmote)

    def setState(self, state, timestamp):
        self.request(state, globalClockDelta.localElapsedTime(timestamp))